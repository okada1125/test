<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LIFF Test</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h1>LIFFアプリ</h1>
  <p id="status">初期化中...</p>

  <script>
  // LIFF初期化
async function main() {
  await liff.init({ liffId: "YOUR_LIFF_ID" });

  // ログインしていない場合、ログインを促す
  if (!liff.isLoggedIn()) {
    liff.login();
    return;
  }

  // ユーザーのLINEプロフィールを取得
  const profile = await liff.getProfile();
  const lineUserId = profile.userId; // LINE IDを取得

  // 取得したLINE IDをNotionに保存するためにWebアプリに送信
  fetch('https://YOUR_GAS_WEBAPP_URL', {
    method: 'POST',
    body: JSON.stringify({ lineUserId: lineUserId }),
    headers: { 'Content-Type': 'application/json' }
  }).then(response => response.json())
    .then(data => {
      console.log('LINE IDが保存されました:', data);
    })
    .catch(error => {
      console.error('エラーが発生しました:', error);
    });
}

main();

</script>


</body>
</html>
